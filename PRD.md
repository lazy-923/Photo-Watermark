# 图片批量水印命令行工具 PRD

## 1. 项目背景
用户希望对指定目录下的所有图片，自动读取其 EXIF 拍摄时间（年月日），并将该信息作为水印添加到图片上。用户可自定义水印的字体大小、颜色和位置。处理后的图片将保存到原目录下的 `_watermark` 子目录中。

## 2. 功能需求

### 2.1 输入

- 若无 EXIF 拍摄时间，则可跳过或提示用户。

- 用户可通过命令行参数设置：
  - 字体大小（如 20、30 等）
  - 字体颜色（如 #FFFFFF、red 等）
  - 水印位置（左上角、居中、右下角等）

- 保证水印不遮挡主要内容，支持透明度设置（可选）。

- 文件名与原图片一致。

- 路径不存在、图片无 EXIF 信息、参数错误等需有友好提示。

- 处理速度快，支持批量处理

## 4. 示例命令
```bash
photo-watermark.exe --path "D:\photos" --font-size 30 --color "#FF0000" --position "bottom-right"
```

## 5. 目录结构示例

```
D:\photos\
  ├─ img1.jpg
  ├─ img2.jpg
        ├─ img1.jpg
# 图片批量水印命令行工具 PRD（更新版）

## 1. 项目背景
用户希望对指定目录下的所有图片，自动读取其 EXIF 拍摄时间（年月日），并将该信息作为水印添加到图片上。所有参数均通过交互输入，操作简单直观。

## 2. 功能需求

### 2.1 输入
- 程序启动后，用户依次输入：
  - 图片文件或目录路径
  - 字体大小（如 30）
  - 字体颜色（如 #FF0000 或 red）
  - 水印位置（top-left、top-right、bottom-left、bottom-right、center）
- 支持递归处理目录下所有图片文件。
- 支持的图片格式：JPEG、PNG（如有 EXIF 信息）。

### 2.2 EXIF 信息读取
- 读取每张图片的 EXIF 信息，提取拍摄时间（年月日）。
- 若无 EXIF 拍摄时间，则跳过并提示。

### 2.3 水印设置
- 用户通过交互输入设置：
  - 字体大小
  - 字体颜色
  - 水印位置

### 2.4 图片处理
- 将拍摄时间（如 2023-09-21）作为文本水印，绘制到图片指定位置。
- 保证水印不遮挡主要内容，支持透明度设置（默认半透明）。

### 2.5 输出
- 处理后的图片保存到原目录下的 `_watermark` 子目录，目录结构与原目录一致。
- 文件名与原图片一致。

### 2.6 错误处理
- 路径不存在、图片无 EXIF 信息、参数错误等需有友好提示。

## 3. 非功能需求
- 跨平台支持（Windows、Linux、macOS）
- 命令行交互友好，参数说明清晰
- 处理速度快，支持批量处理

## 4. 示例流程
1. 启动程序
2. 按提示输入参数
3. 查看 _watermark 目录下的处理结果

## 5. 目录结构示例
```
D:\photos\
  ├─ img1.jpg
  ├─ img2.jpg
  └─ _watermark\
        ├─ img1.jpg
        └─ img2.jpg
```

---
如需进一步细化或有其他需求，请补充说明。
        └─ img2.jpg
```

---

如需进一步细化或有其他需求，请补充说明。